# ğŸš€ UbuntuæœåŠ¡å™¨éƒ¨ç½²æŒ‡å—

## ç®€ä»‹

æœ¬æŒ‡å—ç”¨äºå°†GUNTç”Ÿäº§ç®¡ç†ç³»ç»Ÿï¼ˆæ–°æ¶æ„ï¼‰éƒ¨ç½²åˆ°UbuntuæœåŠ¡å™¨ã€‚

---

## ğŸ“‹ éƒ¨ç½²å‰å‡†å¤‡

### 1. ç¡®è®¤æœåŠ¡å™¨ç¯å¢ƒ
- âœ… Ubuntu 18.04+ 
- âœ… Node.js 16+ 
- âœ… MySQL 5.7+
- âœ… Git
- âœ… Nginxï¼ˆå¯é€‰ï¼‰

### 2. æœ¬åœ°æ¨é€ä»£ç 
```bash
# Windowsæœ¬åœ°
git add .
git commit -m "å®Œæˆæ¶æ„é‡æ„å’Œæ€§èƒ½ä¼˜åŒ–"
git push origin test
```

---

## ğŸ”§ ä¸€é”®éƒ¨ç½²ï¼ˆæ¨èï¼‰

### æ–¹æ³•ä¸€ï¼šä½¿ç”¨éƒ¨ç½²è„šæœ¬

```bash
# åœ¨UbuntuæœåŠ¡å™¨ä¸Š
cd /path/to/GUNT
chmod +x deploy-ubuntu.sh
./deploy-ubuntu.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨å®Œæˆï¼š
- âœ… æ‹‰å–æœ€æ–°ä»£ç 
- âœ… å®‰è£…å‰åç«¯ä¾èµ–
- âœ… ç¼–è¯‘Tailwind CSS
- âœ… æ„å»ºå‰ç«¯
- âœ… ï¼ˆå¯é€‰ï¼‰è¿è¡Œæ•°æ®åº“ä¼˜åŒ–
- âœ… é‡å¯PM2æœåŠ¡

---

## ğŸ“ æ‰‹åŠ¨éƒ¨ç½²æ­¥éª¤

å¦‚æœä½ æƒ³æ‰‹åŠ¨æ§åˆ¶æ¯ä¸€æ­¥ï¼š

### æ­¥éª¤1: æ‹‰å–ä»£ç 
```bash
cd /path/to/GUNT
git pull origin test
```

### æ­¥éª¤2: å®‰è£…å‰ç«¯ä¾èµ–
```bash
npm install
```

**æ–°å¢ä¾èµ–åŒ…æ‹¬ï¼š**
- `zustand@^4.5.7` - çŠ¶æ€ç®¡ç†
- `@tanstack/react-query@^5.56.2` - æ•°æ®ç¼“å­˜
- `react-window@^1.8.11` - è™šæ‹Ÿæ»šåŠ¨
- `eslint-plugin-react-hooks@^7.0.1` - ESLintæ’ä»¶

### æ­¥éª¤3: å®‰è£…åç«¯ä¾èµ–
```bash
cd server
npm install
cd ..
```

### æ­¥éª¤4: ç¼–è¯‘Tailwind CSSï¼ˆå¿…é¡»ï¼ï¼‰
```bash
npx tailwindcss -i ./src/index.css -o ./src/tailwind-output.css --minify
```

**ä¸ºä»€ä¹ˆå¿…é¡»ï¼Ÿ**
- æ–°UIç»„ä»¶ä½¿ç”¨äº†å¤§é‡Tailwindç±»ï¼ˆæ¸å˜è‰²ã€åŠ¨ç”»ç­‰ï¼‰
- ä¸ç¼–è¯‘ä¼šå¯¼è‡´æ ·å¼ä¸¢å¤±ï¼ŒKPIå¡ç‰‡æ˜¾ç¤ºä¸ºç©ºç™½

### æ­¥éª¤5: æ„å»ºå‰ç«¯
```bash
npm run build
```

### æ­¥éª¤6: æ•°æ®åº“ä¼˜åŒ–ï¼ˆæ¨èï¼‰
```bash
# ä¸ºordersã€machinesç­‰è¡¨æ·»åŠ ç´¢å¼•
mysql -u root -p your_database < server/database-optimization.sql
```

**ä¼˜åŒ–å†…å®¹ï¼š**
- ä¸ºå¸¸ç”¨æŸ¥è¯¢å­—æ®µæ·»åŠ ç´¢å¼•ï¼ˆstatus, startDate, machineç­‰ï¼‰
- æ·»åŠ å…¨æ–‡æœç´¢ç´¢å¼•ï¼ˆorderNo, materialNo, materialNameï¼‰
- ä¸ºå…³è”æŸ¥è¯¢æ·»åŠ å¤åˆç´¢å¼•

### æ­¥éª¤7: é‡å¯æœåŠ¡

#### ä½¿ç”¨PM2ï¼ˆæ¨èï¼‰
```bash
cd server

# å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡éƒ¨ç½²
pm2 start server.js --name gunt-server

# å¦‚æœå·²ç»éƒ¨ç½²è¿‡
pm2 restart gunt-server

# ä¿å­˜PM2é…ç½®
pm2 save

# è®¾ç½®å¼€æœºè‡ªå¯
pm2 startup
```

#### ä½¿ç”¨systemd
```bash
sudo systemctl restart gunt-server
```

---

## ğŸ” éªŒè¯éƒ¨ç½²

### 1. æ£€æŸ¥æœåŠ¡çŠ¶æ€
```bash
pm2 status
pm2 logs gunt-server
```

### 2. æ£€æŸ¥ç«¯å£
```bash
# å‰ç«¯ï¼ˆé»˜è®¤3000ï¼‰
netstat -tuln | grep 3000

# åç«¯APIï¼ˆé»˜è®¤12454ï¼‰
netstat -tuln | grep 12454
```

### 3. æµ‹è¯•è®¿é—®
```bash
# æµ‹è¯•åç«¯API
curl http://localhost:12454/api/health

# æµè§ˆå™¨è®¿é—®
http://ä½ çš„æœåŠ¡å™¨IP:3000
```

### 4. éªŒè¯æ–°åŠŸèƒ½

ç™»å½•ç³»ç»Ÿåæ£€æŸ¥ï¼š
- âœ… **KPIå½©è‰²å¡ç‰‡**æ˜¯å¦æ­£å¸¸æ˜¾ç¤ºï¼ˆé¡¶éƒ¨4ä¸ªæ¸å˜è‰²å¡ç‰‡ï¼‰
- âœ… **åŠ è½½é€Ÿåº¦**æ˜¯å¦æå‡ï¼ˆè™šæ‹Ÿæ»šåŠ¨ã€åˆ†é¡µï¼‰
- âœ… **Toasté€šçŸ¥**æ˜¯å¦æ­£å¸¸å¼¹å‡º
- âœ… **éª¨æ¶å±**åŠ è½½åŠ¨ç”»æ˜¯å¦æ˜¾ç¤º
- âœ… **å·¥å•ç®¡ç†**é¡µé¢æ•°æ®æ˜¯å¦æ­£å¸¸
- âœ… **æœºå°ç®¡ç†**é¡µé¢æ•°æ®æ˜¯å¦æ­£å¸¸

---

## âš ï¸ å¸¸è§é—®é¢˜

### é—®é¢˜1: KPIå¡ç‰‡æ˜¾ç¤ºç©ºç™½
**åŸå› ï¼š** Tailwind CSSæœªç¼–è¯‘

**è§£å†³ï¼š**
```bash
npx tailwindcss -i ./src/index.css -o ./src/tailwind-output.css --minify
npm run build
pm2 restart gunt-server
```

### é—®é¢˜2: é¡µé¢åŠ è½½åæ²¡æœ‰æ•°æ®
**åŸå› ï¼š** æ–°æ¶æ„éœ€è¦æ˜¾å¼è°ƒç”¨loadDataå‡½æ•°

**è§£å†³ï¼š** ç¡®ä¿å·²æ‹‰å–æœ€æ–°ä»£ç ï¼ˆåŒ…å«ä¿®å¤ï¼‰

### é—®é¢˜3: npm installå¤±è´¥
**åŸå› ï¼š** ç½‘ç»œé—®é¢˜æˆ–æƒé™é—®é¢˜

**è§£å†³ï¼š**
```bash
# ä½¿ç”¨å›½å†…é•œåƒ
npm install --registry=https://registry.npmmirror.com

# æ¸…é™¤ç¼“å­˜
npm cache clean --force
npm install
```

### é—®é¢˜4: æ•°æ®åº“ä¼˜åŒ–è„šæœ¬æŠ¥é”™
**åŸå› ï¼š** ç´¢å¼•å¯èƒ½å·²å­˜åœ¨

**è§£å†³ï¼š** è¿™æ˜¯æ­£å¸¸çš„ï¼Œå¯ä»¥å¿½ç•¥é‡å¤ç´¢å¼•çš„é”™è¯¯

### é—®é¢˜5: PM2æœåŠ¡æ— æ³•å¯åŠ¨
**åŸå› ï¼š** ç«¯å£è¢«å ç”¨

**è§£å†³ï¼š**
```bash
# æŸ¥æ‰¾å ç”¨ç«¯å£çš„è¿›ç¨‹
lsof -i :12454
# æ€æ­»è¿›ç¨‹
kill -9 <PID>
# é‡å¯æœåŠ¡
pm2 restart gunt-server
```

---

## ğŸ”„ å›æ»šåˆ°æ—§ç‰ˆæœ¬

å¦‚æœæ–°æ¶æ„æœ‰é—®é¢˜ï¼Œå¯ä»¥å›æ»šï¼š

```bash
# 1. åˆ‡æ¢åˆ°ä¹‹å‰çš„commit
git log --oneline  # æŸ¥çœ‹æäº¤å†å²
git checkout <æ—§ç‰ˆæœ¬commit-hash>

# 2. é‡æ–°éƒ¨ç½²
npm install
npm run build
pm2 restart gunt-server
```

---

## ğŸ“Š æ€§èƒ½ç›‘æ§

### æ•°æ®åº“æ€§èƒ½ç›‘æ§
```bash
# æŸ¥çœ‹æ…¢æŸ¥è¯¢æ—¥å¿—
mysql -u root -p -e "SHOW VARIABLES LIKE 'slow_query_log%';"

# æŸ¥çœ‹ç´¢å¼•ä½¿ç”¨æƒ…å†µ
curl http://localhost:12454/api/database/index-usage
```

### åº”ç”¨æ€§èƒ½ç›‘æ§
```bash
# æŸ¥çœ‹PM2ç›‘æ§
pm2 monit

# æŸ¥çœ‹å†…å­˜ä½¿ç”¨
pm2 status
```

---

## ğŸ” å®‰å…¨å»ºè®®

1. **ä¿®æ”¹é»˜è®¤ç«¯å£**
```bash
# ç¼–è¾‘ server/.env
PORT=è‡ªå®šä¹‰ç«¯å£
```

2. **å¯ç”¨HTTPS**
```bash
# Nginxåå‘ä»£ç†é…ç½®
# å‚è€ƒ DEPLOYMENT.md
```

3. **å®šæœŸå¤‡ä»½æ•°æ®åº“**
```bash
# ä½¿ç”¨æä¾›çš„å¤‡ä»½è„šæœ¬
cd server/scripts
./backup-database.sh
```

4. **æ›´æ–°ä¾èµ–**
```bash
# å®šæœŸæ£€æŸ¥å®‰å…¨æ›´æ–°
npm audit
npm audit fix
```

---

## ğŸ“ æ”¯æŒ

å¦‚é‡é—®é¢˜ï¼Œè¯·æŸ¥çœ‹ï¼š
- ğŸ“– `DEPLOYMENT_CHECKLIST.md` - è¯¦ç»†éƒ¨ç½²æ¸…å•
- ğŸ“– `OPTIMIZATION_COMPLETE.md` - ä¼˜åŒ–æ€»ç»“
- ğŸ“– `DATABASE_OPTIMIZATION.md` - æ•°æ®åº“ä¼˜åŒ–è¯¦æƒ…
- ğŸ“– `TROUBLESHOOTING.md` - æ•…éšœæ’é™¤æŒ‡å—

---

## âœ… éƒ¨ç½²å®Œæˆæ£€æŸ¥æ¸…å•

- [ ] ä»£ç æ‹‰å–æˆåŠŸ
- [ ] å‰åç«¯ä¾èµ–å®‰è£…å®Œæˆ
- [ ] Tailwind CSSç¼–è¯‘å®Œæˆ
- [ ] å‰ç«¯æ„å»ºæˆåŠŸ
- [ ] æ•°æ®åº“ä¼˜åŒ–å·²è¿è¡Œ
- [ ] PM2æœåŠ¡æ­£å¸¸è¿è¡Œ
- [ ] ç½‘é¡µå¯ä»¥æ­£å¸¸è®¿é—®
- [ ] KPIå¡ç‰‡æ˜¾ç¤ºæ­£å¸¸
- [ ] å·¥å•ç®¡ç†é¡µé¢æ•°æ®æ­£å¸¸
- [ ] æœºå°ç®¡ç†é¡µé¢æ•°æ®æ­£å¸¸
- [ ] æ€§èƒ½æ˜æ˜¾æå‡

---

**éƒ¨ç½²æ„‰å¿«ï¼** ğŸ‰

